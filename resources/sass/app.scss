
/*
 * GLOBAL RESETS
 */
* {
	box-sizing: border-box;
}

p {
	margin-top: 0;
}



/*
 * GLOBAL APP
 */
#app-wrapper {

	/* Quick'n'dirty helper to get a phone layout */
	width: 400px;
	margin: auto;
}

a {
	color: #000;
	font-weight: 600;
}




/*
 * CSS3 Animations Keyframes
 */
@keyframes lds-dual-ring {
	0% {
		transform: rotate(0deg);
	}

	100% {
		transform: rotate(360deg);
	}
}



/*
 * GLOBAL UI ELEMENTS
 */

/* Audio control wrapper */
.audio-control-wrapper {
	$picto_size: 100px;

	position: relative;
	height: $picto_size + 20px;
	margin-bottom: 20px;

	.audio-timer {
		margin: 10px 0;
		text-align: center;
		opacity: 0;
	}

	button.audio-control {
		width: $picto_size;
		height: $picto_size;
		border: none;
		display: block;
		margin: auto;
		background: transparent no-repeat center;
		background-size: contain;
		overflow: hidden;
		text-indent: -900px;
		cursor: pointer;

		&.record { background-image: url('/img/audio-button-record-black.svg'); }
		&.record-red { background-image: url('/img/audio-button-record-red.svg'); }
		&.play { background-image: url('/img/audio-button-play.svg'); }
		&.stop { background-image: url('/img/audio-button-stop.svg'); }
	}

	.audio-control-loader {
		$loader_size: 40px;
		$border_size: 6px;

		display: none;

		position: absolute;
	    top: 0;
	    left: 0;
	    bottom: 0;
	    right: 0;

	    .generic-loader {
			display: block;
		    width: $loader_size;
		    height: $loader_size;
		    margin: auto;
		    position: absolute;
		    top: 50%;
		    left: 50%;
		    transform: translateX(-50%) translateY(-50%);

		    &:after {
				content: " ";
				display: block;
				width: $loader_size;
				height: $loader_size;
				margin: 0;
				margin-top: - ($border_size / 2);
				margin-left: - ($border_size / 2);
				border-radius: 50%;
				border: $border_size solid #000;
				border-color: #000 transparent #000 transparent;
				animation: lds-dual-ring 1.2s linear infinite;
			}
		}

		.label {
			position: absolute;
			left: 0;
			right: 0;
			bottom: 0;
			text-align: center;
		}
	}

	&.recorder {
		button.record { display: block; }
		button.record-red { display: none; }

		&[data-state="is-loading"],
		&[data-state="is-encoding"] {
			button.record { display: none; }
			button.record-red { display: none; }
		}

		&[data-state="is-loading"] {
			.audio-control-loader.loading-encoder {
				display: block;
			}
		}

		&[data-state="is-encoding"] {
			.audio-control-loader.encoding-recording {
				display: block;
			}
		}

		&[data-state="is-active"] {
			button.record { display: none; }
			button.record-red { display: block; }

			.audio-timer {
				opacity: 1;
			}
		}
	}

	&.player {
		button.play { display: block; }
		button.stop { display: none; }

		&[data-state="is-active"] {
			button.play { display: none; }
			button.stop { display: block; }
		}
	}

	.native-audio-el-container { display: none; }
}





/*
 * HOMEPAGE
 */
body.page_welcome {

	.app-about {
		margin-bottom: 40px;
		text-align: center;

		.text-wrapper {
			height: 100px;
			overflow: hidden;
			position: relative;
			text-align: left;

			&:after {
				content: ' ';
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background: linear-gradient(transparent, white);
				opacity: 1;
			}
		}

		&.opened .text-wrapper {
			height: auto;

			&:after {
				display: none;
			}
		}
	}

	.home-interaction-block {
		overflow: hidden;
		margin-bottom: 40px;

		> * {
			width: 50%;
		}

		&.listen > * {
			float: left;
		}

		&.record > * {
			float: right;
		}

		.text {
			> a {
				display: inline-block;
				margin-bottom: 10px;
			}

			.dream-meta {
				display: block;
			}
		}
	}
}


/*
 * RECORD DREAM PAGE
 */
body.page_record_dream {
	.record-step {
		display: none;

		&.shown {
			display: block;
		}
	}

	&.is-recording {
		.hide-when-recording { visibility: hidden; }
	}

	.validate-recording-buttons {
		margin-top: 40px;

		button {
			display: block;
			width: 200px;
			margin: 10px auto;
		}
	}

	.send-dream-form {
		.form-entry {
			margin: 10px;

			label {
				display: block;
			}

			input[type="text"],
			input[type="date"] {
				display: block;
				width: 100%;
			}

			input[type="checkbox"],
			input[type="radio"] {
				display: inline-block;
			}
		}
	}
}
